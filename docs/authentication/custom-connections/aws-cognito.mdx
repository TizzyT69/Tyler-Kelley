---
title: AWS Cognito Login with Web3Auth
sidebar_label: AWS Cognito
description: "AWS Cognito Login with Web3Auth | Documentation - Web3Auth"
---

import CustomConnectionOptions from "@site/static/images/dashboard/authentication-custom-connections.png";
import AWSConnection from "@site/static/images/dashboard/aws-cognito-connection.png";

AWS Cognito is a scalable authentication service provided by Amazon Web Services that enables
developers to securely manage user sign-up, sign-in, and access control. Web3Auth supports AWS
Cognito as a service provider, allowing seamless integration between AWS Cognito’s authentication
capabilities and Web3Auth’s decentralized key management infrastructure.

[Take a look at the supported social logins on AWS Cognito](https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-pools-social-idp.html)

## Create an AWS Cognito Application

To begin the integration process, developers must first create a new AWS Cognito application using
the [AWS Management Console](https://console.aws.amazon.com/). This initial setup is required before
configuring the connection within Web3Auth.

Once the AWS Cognito application is created, developers can proceed to add it as a custom connection
in the Web3Auth Dashboard.

[Learn how to set up AWS Cognito](https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-console).

## Create an AWS Cognito Connection

:::success Create AWS Cognito Connection on Dashboard

To use this feature, developers must go to the `Custom Connections` tab in the
[Web3Auth Dashboard](https://dashboard.web3auth.io).

<div style={{ flexBasis: "300px", flexGrow: "1", textAlign: "center" }}>
  <img
    src={CustomConnectionOptions}
    style={{ alignSelf: "center", maxWidth: "100%" }}
    alt="Custom Connection Options"
  />
</div>

:::

Follow these steps to create a AWS Cognito connection:

1. Visit the [Web3Auth Dashboard](https://dashboard.web3auth.io).
1. Go to the `Custom Connections` section.
1. Click on the `Settings` icon near the `AWS Cognito` connection.
1. Enter the `Cognito Connection ID`.
1. Paste `https://cognito-idp.{REGION}.amazonaws.com/{USER_POOL_ID}/.well-known/jwks.json` as
   `JWKS Endpoint`.
1. Paste a sample `JWT Token` to auto populate the best **JWT validations** possible.
1. Select the `JWT user identifier`: `email`, `sub` or `custom`.
1. Toggle the Case Sensitivity of `User Identifier`. (Optional)
1. Click on `Add Custom Validations` to add validations manually.
   1. Type iss as a field and `https://cognito-idp.{REGION}.amazonaws.com/{USER_POOL_ID}` as a
      value.
   1. Next, type aud as a field and `APP_CLIENT_ID` as a value.
1. Finally, click on the `Add Connection` button.

> Note: Replace the `REGION`, `USER_POOL_ID` and `APP_CLIENT_ID` with your Cognito specific details.

<div style={{ flexBasis: "300px", flexGrow: "1", textAlign: "left" }}>
  <img
    src={AWSConnection}
    style={{ alignSelf: "center", maxWidth: "100%" }}
    alt="AWS Cognito Connection"
  />
</div>

## Usage

### Initialize Web3Auth

Wrap your app with the `Web3AuthProvider`. This provider should be as close to the root of your
React tree as possible.

```js title="Example: React + Vite (main.tsx)"
import { StrictMode } from "react";
import { createRoot } from "react-dom/client";
import "./index.css";

import { Web3AuthProvider, WEB3AUTH_NETWORK } from "@web3auth/modal/react";

import App from "./App.tsx";

createRoot(document.getElementById("root")!).render(
  <StrictMode>
    <Web3AuthProvider
      config={{
        web3AuthOptions: {
          clientId: "WEB3AUTH_CLIENT_ID", // Replace with your Client ID
          web3AuthNetwork: WEB3AUTH_NETWORK.SAPPHIRE_DEVNET,
        },
      }}
    >
      <App />
    </Web3AuthProvider>
  </StrictMode>
);
```

Since, the `AWS Cognito Connection` details are available from Dashboard, developers don't need to
pass any additional parameters to the `Web3AuthProvider`.

> Follow our [Quickstart Guide](/quick-start) to setup the basic flow.

### Login with AWS Cognito

```jsx
import { useWeb3AuthConnect, WALLET_CONNECTORS, AUTH_CONNECTION } from "@web3auth/modal/react";
import { useAccount } from "wagmi";

function LoginPage() {
  const { connectTo } = useWeb3AuthConnect();
  const { address } = useAccount();

  const loginWithCognito = async () => {
    try {
      // focus-start
      await connectTo(WALLET_CONNECTORS.AUTH, {
        authConnection: AUTH_CONNECTION.CUSTOM,
        authConnectionId: "cognito-auth-connection-id",
        extraLoginOptions: {
          clientId: "COGNITO_CLIENT_ID",
          domain: "COGNITO_DOMAIN",
          verifierIdField: "email",
          response_type: "token",
          scope: "email profile openid",
        },
      });
      // focus-end
    } catch (error) {
      console.error("AWS Cognito authentication error:", error);
    }
  };

  return (
    <div>
      <button onClick={() => loginWithCognito()}>Login with AWS Cognito</button>
      <p>Address: {address}</p>
      {/* 0x1e46c61f7F5B1D9B8505CEdED94AB1468dC28aa0 */}
    </div>
  );
}
```
