---
title: Integrate Firebase with Web3Auth
image: "guides-banners/firebase-no-modal.png"
description: Learn how to use Web3Auth with Firebase
type: guide
tags: [plug and play, web, firebase, custom authentication, react, evm]
date: August 23, 2022
author: Web3Auth Team
communityPortalTopicId: 50
---

import SEO from "@site/src/components/SEO";
import Web3AuthPrerequisites from "@site/src/common/guides/_web3auth-prerequisites.mdx";
import SetupWeb3AuthDashboard from "@site/src/common/guides/_setup-web3auth-dashboard.mdx";

<SEO
  title="Integrate Firebase with Web3Auth"
  description="Learn how to use Web3Auth with Firebase in your React Application"
  image="https://web3auth.io/docs/guides-banners/firebase-no-modal.png"
  slug="/guides/firebase"
/>

This guide will cover how to integrate Firebase with Web3Auth using the new Web3Auth v10 hooks-based
approach. You'll learn how to set up both services for seamless authentication and wallet creation.

## Quick Start

```bash
npx degit Web3Auth/web3auth-pnp-examples/custom-authentication/single-connection/firebase-jwt-example w3a-firebase-demo && cd w3a-firebase-demo && npm install && npm run dev
```

## How it works?

When integrating Web3Auth with Firebase, the login flow follows these steps:

1. **Authentication with Firebase**: The user logs in to your application using Firebase
   Authentication (with providers like Google, GitHub, Email/Password, etc.)
2. **Token Generation**: Upon successful authentication, Firebase issues a JWT token (id_token)
3. **Web3Auth Verification**: This token is passed to Web3Auth, which verifies it against the Custom
   Connection you configured
4. **Key Generation**: Web3Auth generates a private key for the user in a self-custodial way
5. **Blockchain Access**: With this key, users can interact with various blockchains without needing
   to manage seed phrases

This flow combines Firebase's robust authentication system with Web3Auth's key management
infrastructure, enabling seamless onboarding to Web3 applications.

## Prerequisites

<Web3AuthPrerequisites />

- A [Firebase](https://console.firebase.google.com) account to be used as a Federated Identity
  Provider.
- A [Google Developer](https://console.developers.google.com) account or other identity providers
  for Firebase.

## Setup

### Setup Firebase

#### Create a Firebase Project

1. Go to your [Firebase console](https://console.firebase.google.com) and create a new project or
   use an existing one.
2. Give your project a name and click on **Continue**.
3. Configure Google Analytics if needed, then click on **Create Project**.

For detailed project setup instructions, visit the
[Firebase Web Documentation](https://firebase.google.com/docs/web/setup).

#### Select Authentication Provider

1. Once the project is created, set up authentication by clicking on the **Authentication** card
   from the home screen or choose **Authentication** under **Build** from the left sidebar.
2. From the **Sign-in method** tab, select the providers you wish to enable. For this guide, we'll
   be enabling **GitHub**.
3. Configure the provider with the required credentials and click on **Save**.

#### Configure Firebase for Web

1. Register your web application by clicking on the `</>` button on the home screen of your project.
2. Enter the **App nickname** and click on **Register** to register the app for Web.
3. Take note of the `firebaseConfig` object that is displayed. You will need this for your
   application.

### Setup Web3Auth

<SetupWeb3AuthDashboard />

#### Setup Firebase Custom Connection

To use Firebase with Web3Auth, you need to create a custom connection:

1. Navigate to the **Custom Connections** tab in the
   [Web3Auth Dashboard](https://dashboard.web3auth.io).
2. Click on the **Settings** icon near the **Firebase** connection.
3. Enter a **Firebase Connection ID** (e.g., "w3a-firebase-demo").
4. Paste `https://www.googleapis.com/service_accounts/v1/jwk/securetoken@system.gserviceaccount.com`
   as the **JWKS Endpoint**.
5. Paste a sample **JWT Token** to auto-populate the best JWT validations possible (optional).
6. Select the **JWT user identifier**: `email`, `sub`, or `custom`.
7. Toggle the **Case Sensitivity** of `User Identifier` (Optional).
8. Click on **Add Custom Validations** to add validations manually:
   - Field: `iss`, Value: `https://securetoken.google.com/YOUR-FIREBASE-PROJECT-ID`
   - Field: `aud`, Value: `YOUR-FIREBASE-PROJECT-ID`
9. Review all settings to ensure accuracy.
10. Finally, click on the **Add Connection** button.

> Note: Replace `YOUR-FIREBASE-PROJECT-ID` with your specific Firebase project ID.

## Using Web3Auth with Firebase

### Installation

Install the required dependencies:

```bash
# Core Web3Auth packages
npm install @web3auth/modal

# Firebase
npm install firebase

# For blockchain interactions
npm install wagmi viem @tanstack/react-query
```

### Setting up Web3Auth Provider

First, create a configuration file for Web3Auth (e.g., `web3authContext.tsx`):

```tsx
import { WEB3AUTH_NETWORK, type Web3AuthOptions } from "@web3auth/modal";

// Get your client ID from https://dashboard.web3auth.io
const clientId = import.meta.env.VITE_WEB3AUTH_CLIENT_ID || "";

// Instantiate SDK
const web3AuthOptions: Web3AuthOptions = {
  clientId,
  web3AuthNetwork: WEB3AUTH_NETWORK.SAPPHIRE_MAINNET,
};

const web3AuthContextConfig = {
  web3AuthOptions,
};

export default web3AuthContextConfig;
```

Then set up the Web3Auth provider in your application:

```tsx
import React from "react";
import ReactDOM from "react-dom/client";
// Setup Web3Auth Provider
import { Web3AuthProvider } from "@web3auth/modal/react";
import web3AuthContextConfig from "./web3authContext";
// Setup Wagmi Provider for blockchain interactions
import { WagmiProvider } from "@web3auth/modal/react/wagmi";
import { QueryClient, QueryClientProvider } from "@tanstack/react-query";

import App from "./App";

const queryClient = new QueryClient();

ReactDOM.createRoot(document.getElementById("root") as HTMLElement).render(
  <React.StrictMode>
    <Web3AuthProvider config={web3AuthContextConfig}>
      <QueryClientProvider client={queryClient}>
        <WagmiProvider>
          <App />
        </WagmiProvider>
      </QueryClientProvider>
    </Web3AuthProvider>
  </React.StrictMode>,
);
```

### Implementing Firebase Authentication

In your main application component, use Web3Auth hooks for authentication with Firebase:

```tsx
import "./App.css";
import { useWeb3AuthConnect, useWeb3AuthDisconnect, useWeb3AuthUser } from "@web3auth/modal/react";
import { WALLET_CONNECTORS, AUTH_CONNECTION } from "@web3auth/modal";
import { useAccount } from "wagmi";
import { SendTransaction } from "./components/sendTransaction";
import { Balance } from "./components/getBalance";
import { SwitchChain } from "./components/switchNetwork";
import { initializeApp } from "firebase/app";
import { getAuth, GithubAuthProvider, signInWithPopup } from "firebase/auth";

// Firebase configuration
const firebaseConfig = {
  apiKey: "YOUR_FIREBASE_API_KEY",
  authDomain: "YOUR_FIREBASE_AUTH_DOMAIN",
  projectId: "YOUR_FIREBASE_PROJECT_ID",
  storageBucket: "YOUR_FIREBASE_STORAGE_BUCKET",
  messagingSenderId: "YOUR_FIREBASE_MESSAGING_SENDER_ID",
  appId: "YOUR_FIREBASE_APP_ID",
};

function App() {
  const {
    connectTo,
    isConnected,
    connectorName,
    loading: connectLoading,
    error: connectError,
  } = useWeb3AuthConnect();
  const {
    disconnect,
    loading: disconnectLoading,
    error: disconnectError,
  } = useWeb3AuthDisconnect();
  const { userInfo } = useWeb3AuthUser();
  const { address } = useAccount();

  const loginWithFirebaseGithub = async () => {
    try {
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const githubProvider = new GithubAuthProvider();

      const result = await signInWithPopup(auth, githubProvider);

      const idToken = await result.user.getIdToken(true);

      await connectTo(WALLET_CONNECTORS.AUTH, {
        authConnectionId: "w3a-firebase-demo", // Your Connection ID from Web3Auth Dashboard
        authConnection: AUTH_CONNECTION.CUSTOM,
        idToken,
        extraLoginOptions: {
          isUserIdCaseSensitive: false,
        },
      });
    } catch (error) {
      console.error("Firebase authentication error:", error);
    }
  };

  function uiConsole(...args: any[]): void {
    const el = document.querySelector("#console>p");
    if (el) {
      el.innerHTML = JSON.stringify(args || {}, null, 2);
      console.log(...args);
    }
  }

  const loggedInView = (
    <>
      <h2>Connected to {connectorName}</h2>
      <div>Address: {address}</div>
      <div className="flex-container">
        <div>
          <button onClick={() => uiConsole(userInfo)} className="card">
            Get User Info
          </button>
        </div>
        <div>
          <button onClick={() => disconnect()} className="card">
            Log Out
          </button>
          {disconnectLoading && <div className="loading">Disconnecting...</div>}
          {disconnectError && <div className="error">{disconnectError.message}</div>}
        </div>
      </div>
      <SendTransaction />
      <Balance />
      <SwitchChain />
    </>
  );

  const unloggedInView = (
    <div className="flex-container">
      <button onClick={loginWithFirebaseGithub} className="card">
        Login with Firebase GitHub
      </button>
      {connectLoading && <div className="loading">Connecting...</div>}
      {connectError && <div className="error">{connectError.message}</div>}
    </div>
  );

  return (
    <div className="container">
      <h1 className="title">
        <a target="_blank" href="https://web3auth.io/docs" rel="noreferrer">
          Web3Auth{" "}
        </a>
        & Firebase Integration
      </h1>

      <div className="grid">{isConnected ? loggedInView : unloggedInView}</div>
      <div id="console" style={{ whiteSpace: "pre-line" }}>
        <p style={{ whiteSpace: "pre-line" }}></p>
      </div>

      <footer className="footer">
        <a
          href="https://github.com/Web3Auth/web3auth-pnp-examples/tree/main/custom-authentication/single-connection/firebase-example"
          target="_blank"
          rel="noopener noreferrer"
        >
          Source code
        </a>
      </footer>
    </div>
  );
}

export default App;
```

### Interacting with the Blockchain

With Web3Auth v10, blockchain interactions are simplified using the wagmi hooks. Here are examples
of components you can use:

#### Getting Balance

```tsx
// components/getBalance.tsx
import { useAccount, useBalance } from "wagmi";
import { formatUnits } from "viem";

export function Balance() {
  const { address } = useAccount();
  const { data, isLoading, error } = useBalance({ address });

  return (
    <div>
      <h2>Balance</h2>
      <div>
        {data?.value !== undefined && `${formatUnits(data.value, data.decimals)} ${data.symbol}`}
        {isLoading && "Loading..."}
        {error && "Error: " + error.message}
      </div>
    </div>
  );
}
```

#### Sending Transactions

```tsx
// components/sendTransaction.tsx
import { FormEvent } from "react";
import { useWaitForTransactionReceipt, useSendTransaction, BaseError } from "wagmi";
import { Hex, parseEther } from "viem";

export function SendTransaction() {
  const { data: hash, error, isPending, sendTransaction } = useSendTransaction();

  async function submit(e: FormEvent<HTMLFormElement>) {
    e.preventDefault();
    const formData = new FormData(e.target as HTMLFormElement);
    const to = formData.get("address") as Hex;
    const value = formData.get("value") as string;
    sendTransaction({ to, value: parseEther(value) });
  }

  const { isLoading: isConfirming, isSuccess: isConfirmed } = useWaitForTransactionReceipt({
    hash,
  });

  return (
    <div>
      <h2>Send Transaction</h2>
      <form onSubmit={submit}>
        <input name="address" placeholder="Address" required />
        <input name="value" placeholder="Amount (ETH)" type="number" step="0.000000001" required />
        <button disabled={isPending} type="submit">
          {isPending ? "Confirming..." : "Send"}
        </button>
      </form>
      {hash && <div>Transaction Hash: {hash}</div>}
      {isConfirming && "Waiting for confirmation..."}
      {isConfirmed && "Transaction confirmed."}
      {error && <div>Error: {(error as BaseError).shortMessage || error.message}</div>}
    </div>
  );
}
```

#### Switching Networks

```tsx
// components/switchNetwork.tsx
import { useChainId, useSwitchChain } from "wagmi";

export function SwitchChain() {
  const chainId = useChainId();
  const { chains, switchChain, error } = useSwitchChain();

  return (
    <div>
      <h2>Switch Chain</h2>
      <h3>Connected to {chainId}</h3>
      {chains.map((chain) => (
        <button
          disabled={chainId === chain.id}
          key={chain.id}
          onClick={() => switchChain({ chainId: chain.id })}
          type="button"
        >
          {chain.name}
        </button>
      ))}
      {error?.message}
    </div>
  );
}
```

## Using Different Firebase Authentication Providers

Firebase supports various authentication providers. Here's how to use some popular ones:

### Google Authentication

```tsx
import { GoogleAuthProvider, signInWithPopup } from "firebase/auth";

const loginWithFirebaseGoogle = async () => {
  try {
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const googleProvider = new GoogleAuthProvider();

    const result = await signInWithPopup(auth, googleProvider);
    const idToken = await result.user.getIdToken(true);

    await connectTo(WALLET_CONNECTORS.AUTH, {
      authConnectionId: "w3a-firebase-demo",
      authConnection: AUTH_CONNECTION.CUSTOM,
      idToken,
    });
  } catch (error) {
    console.error("Firebase Google authentication error:", error);
  }
};
```

### Email/Password Authentication

```tsx
import { createUserWithEmailAndPassword, signInWithEmailAndPassword } from "firebase/auth";

// Sign up new users
const signUpWithFirebase = async (email, password) => {
  try {
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const userCredential = await createUserWithEmailAndPassword(auth, email, password);
    const idToken = await userCredential.user.getIdToken(true);

    await connectTo(WALLET_CONNECTORS.AUTH, {
      authConnectionId: "w3a-firebase-demo",
      authConnection: AUTH_CONNECTION.CUSTOM,
      idToken,
    });
  } catch (error) {
    console.error("Firebase signup error:", error);
  }
};

// Sign in existing users
const signInWithFirebase = async (email, password) => {
  try {
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const userCredential = await signInWithEmailAndPassword(auth, email, password);
    const idToken = await userCredential.user.getIdToken(true);

    await connectTo(WALLET_CONNECTORS.AUTH, {
      authConnectionId: "w3a-firebase-demo",
      authConnection: AUTH_CONNECTION.CUSTOM,
      idToken,
    });
  } catch (error) {
    console.error("Firebase signin error:", error);
  }
};
```

## Example code

The code for the application we developed in this guide can be found in the
[Web3Auth Firebase Example](https://github.com/Web3Auth/web3auth-pnp-examples/tree/main/custom-authentication/single-connection/firebase-example).
Check it out and try running it locally yourself!

## Questions?

Ask us on [Web3Auth's Community Support Portal](https://web3auth.io/community)
