---
title: How to use Google with Web3Auth
image: "guides-banners/google.png"
description: Learn how to use Web3Auth for Google authentication.
type: guide
tags: [web, google, authentication, react, evm, plug and play]
date: July 18, 2022
author: Web3Auth Team
communityPortalTopicId: 54
---

import GoogleAppSetup from "@site/src/common/guides/_google-app-setup.mdx";
import SetupWeb3AuthDashboard from "@site/src/common/guides/_setup-web3auth-dashboard.mdx";
import Web3AuthPrerequisites from "@site/src/common/guides/_web3auth-prerequisites.mdx";
import SEO from "@site/src/components/SEO";
import GooglpmultieToggle from "@site/static/images/dashboard/authentication-social-connections.png";
import GoogleConnection from "@site/static/images/dashboard/google-connection.png";

<SEO
  title="How to use Google with Web3Auth"
  description="Learn how to use Web3Auth for Google authentication."
  image="https://web3auth.io/docs/guides-banners/google.png"
  slug="/guides/google"
/>

This guide will cover the basics of how to set up Web3Auth with Google Login and provide steps on
how to develop a basic web application on the Ethereum blockchain.

**Live Demo:** https://web3auth-core-google-demo.vercel.app

## Quick Start

```bash
npx degit Web3Auth/web3auth-pnp-examples/web-modal-sdk/custom-authentication/single-connection/google-implicit-example w3a-google-demo && cd w3a-google-demo && npm install && npm run dev
```

## How it works?

When integrating Web3Auth with Google Login the flow looks something like this:

![Web3Auth Core - Google Login Flow](/images/implicit-flow.svg)

- When a user logs in with `Google`, Google sends a JWT `id_token` to the app. This JWT token is
  sent to the Web3Auth SDK's login function.

- Finally, on successful validation of the JWT token, Web3Auth will generate a private key for the
  user, in a self-custodial way, resulting in easy onboarding for your user to the application.

## Prerequisites

<Web3AuthPrerequisites />

- A [Google Developer](https://console.developers.google.com) account to be used as Login provider
  for Web3Auth authentication.

## Setup

### Setup your Google App

1. Follow Google's instructions to
   [set up an OAuth 2.0 app.](https://support.google.com/cloud/answer/6158849?hl=en)
2. Paste the following URI as a redirect URI into the "Authorized redirect URIs" field.

   - `https://auth.web3auth.io/auth`

   ![Google OAuth2.0 App Dashboard](/guides/social-providers/google/google-app-redirect-uri.png)

3. Obtain the OAuth `Client ID` from the
   [App on the Google Developer dashboard](https://console.developers.google.com/)

### Setup your Web3Auth Dashboard

<SetupWeb3AuthDashboard />

:::success Enable on Dashboard

To use this feature, please enable `Google` from the Social Connections section in the
[Web3Auth Dashboard](https://dashboard.web3auth.io).

<div style={{ display: "flex", margin: "20px 0" }}>
  <img
    src={GoogleToggle}
    style={{
      maxWidth: "800px",
      borderRadius: "8px",
      boxShadow: "0 2px 6px rgba(0, 0, 0, 0.1)",
    }}
    alt="Toggle Google Connection on Dashboard"
  />
</div>

> By default, Web3Auth uses its own pre-configured credentials for Google login.

:::

### Create a Google Connection

Follow these steps to create a Google connection:

1. Visit the [Web3Auth Dashboard](https://dashboard.web3auth.io).
2. Go to the `Social Connections` section.
3. Click on the `Settings` icon near the Google connection.
4. Enter the `Auth Connection ID` (e.g., "w3a-google-demo").
5. Enter the `Google Client ID` you obtained from the Google Developer dashboard.
6. Finally, click on the `Add Connection` button.

<div style={{ display: "flex", margin: "20px 0" }}>
  <img
    src={GoogleConnection}
    style={{
      maxWidth: "600px",
      borderRadius: "8px",
      boxShadow: "0 2px 6px rgba(0, 0, 0, 0.1)",
    }}
    alt="Google Connection"
  />
</div>

## Using the Web3Auth SDK

To use the Web3Auth SDK, you need to add the dependency of the respective platform SDK of Web3Auth
to your project. To know more about the available SDKs, please have a look at this
[documentation page](/sdk).

For this guide, we will be using the Web3Auth Modal SDK with React hooks.

### Installation

Install the required Web3Auth packages:

```bash
npm install @web3auth/modal
```

For interacting with Ethereum blockchain:

```bash
npm install wagmi viem @tanstack/react-query
```

### Setting up Web3Auth in React

We need to set up the Web3Auth context configuration:

```tsx title="src/web3authContext.tsx"
import { WEB3AUTH_NETWORK, type Web3AuthOptions } from "@web3auth/modal";

// Get client ID from https://dashboard.web3auth.io
const clientId = import.meta.env.VITE_WEB3AUTH_CLIENT_ID;

// Instantiate SDK
const web3AuthOptions: Web3AuthOptions = {
  clientId,
  web3AuthNetwork: WEB3AUTH_NETWORK.SAPPHIRE_MAINNET,
};

const web3AuthContextConfig = {
  web3AuthOptions,
};

export default web3AuthContextConfig;
```

Then, wrap your application with the Web3Auth provider and Wagmi provider:

```tsx title="src/index.tsx"
import "./index.css";

import ReactDOM from "react-dom/client";
// Setup Web3Auth Provider
import { Web3AuthProvider } from "@web3auth/modal/react";
import web3AuthContextConfig from "./web3authContext";
// Setup Wagmi Provider
import { WagmiProvider } from "@web3auth/modal/react/wagmi";
import { QueryClient, QueryClientProvider } from "@tanstack/react-query";

import App from "./App";

const queryClient = new QueryClient();

const root = ReactDOM.createRoot(document.getElementById("root") as HTMLElement);
root.render(
  // Setup Web3Auth Provider
  <Web3AuthProvider config={web3AuthContextConfig}>
    {/* Setup Wagmi Provider */}
    <QueryClientProvider client={queryClient}>
      <WagmiProvider>
        <App />
      </WagmiProvider>
    </QueryClientProvider>
  </Web3AuthProvider>,
);
```

### Authentication

In your main application component, use Web3Auth hooks for authentication:

```tsx title="src/App.tsx"
import "./App.css";
import { useWeb3AuthConnect, useWeb3AuthDisconnect, useWeb3AuthUser } from "@web3auth/modal/react";
import { WALLET_CONNECTORS, AUTH_CONNECTION } from "@web3auth/modal";
import { useAccount } from "wagmi";
import { SendTransaction } from "./components/sendTransaction";
import { Balance } from "./components/getBalance";
import { SwitchChain } from "./components/switchNetwork";

function App() {
  const {
    connectTo,
    isConnected,
    connectorName,
    loading: connectLoading,
    error: connectError,
  } = useWeb3AuthConnect();
  const {
    disconnect,
    loading: disconnectLoading,
    error: disconnectError,
  } = useWeb3AuthDisconnect();
  const { userInfo } = useWeb3AuthUser();
  const { address } = useAccount();

  const loginWithGoogle = async () => {
    await connectTo(WALLET_CONNECTORS.AUTH, {
      authConnection: AUTH_CONNECTION.GOOGLE,
      authConnectionId: "w3a-google-demo",
    });
  };

  function uiConsole(...args: any[]): void {
    const el = document.querySelector("#console>p");
    if (el) {
      el.innerHTML = JSON.stringify(args || {}, null, 2);
      console.log(...args);
    }
  }

  const loggedInView = (
    <div className="grid">
      <h2>Connected to {connectorName}</h2>
      <div>{address}</div>
      <div className="flex-container">
        <div>
          <button onClick={() => uiConsole(userInfo)} className="card">
            Get User Info
          </button>
        </div>
        <div>
          <button onClick={() => disconnect()} className="card">
            Log Out
          </button>
          {disconnectLoading && <div className="loading">Disconnecting...</div>}
          {disconnectError && <div className="error">{disconnectError.message}</div>}
        </div>
      </div>
      <SendTransaction />
      <Balance />
      <SwitchChain />
    </div>
  );

  const unloggedInView = (
    <div className="grid">
      <div className="flex-container">
        <button onClick={loginWithGoogle} className="card">
          Login with Google
        </button>
      </div>
      {connectLoading && <div className="loading">Connecting...</div>}
      {connectError && <div className="error">{connectError.message}</div>}
    </div>
  );

  return (
    <div className="container">
      <h1 className="title">
        <a target="_blank" href="https://web3auth.io/docs/sdk/web" rel="noreferrer">
          Web3Auth{" "}
        </a>
        & React with Google
      </h1>

      {isConnected ? loggedInView : unloggedInView}
      <div id="console" style={{ whiteSpace: "pre-line" }}>
        <p style={{ whiteSpace: "pre-line" }}></p>
      </div>
    </div>
  );
}

export default App;
```

### JWT Login with Google One Tap (Alternative Method)

You can also use Google One Tap for a more streamlined login experience:

```tsx
import { GoogleLogin, CredentialResponse } from "@react-oauth/google";

function App() {
  // ... other code from earlier example

  // JWT Login with Google One Tap
  const loginWithGoogleOneTap = async (response: CredentialResponse) => {
    const idToken = response.credential;

    await connectTo(WALLET_CONNECTORS.AUTH, {
      authConnectionId: "w3a-google-demo",
      authConnection: AUTH_CONNECTION.GOOGLE,
      idToken,
      extraLoginOptions: {
        isUserIdCaseSensitive: false,
      },
    });
  };

  return (
    <div className="container">
      {/* ... other UI components */}

      {!isConnected && (
        <div>
          <button onClick={loginWithGoogle}>Login with Google</button>
          <div className="or-divider">OR</div>
          <GoogleLogin
            onSuccess={loginWithGoogleOneTap}
            onError={() => {
              console.log("Login Failed");
            }}
            useOneTap
          />
        </div>
      )}

      {/* ... rest of the UI */}
    </div>
  );
}
```

### Interacting with Blockchain

With the Web3Auth and Wagmi integration, you can easily interact with blockchain. Here are some
examples:

#### Getting Balance

```tsx title="src/components/getBalance.tsx"
import { useAccount, useBalance } from "wagmi";
import { formatUnits } from "viem";

export function Balance() {
  const { address } = useAccount();

  const { data, isLoading, error } = useBalance({ address });

  return (
    <div>
      <h2>Balance</h2>
      <div>
        {data?.value !== undefined && `${formatUnits(data.value, data.decimals)} ${data.symbol}`}{" "}
        {isLoading && "Loading..."} {error && "Error: " + error.message}
      </div>
    </div>
  );
}
```

#### Sending Transactions

```tsx title="src/components/sendTransaction.tsx"
import { FormEvent } from "react";
import { useWaitForTransactionReceipt, useSendTransaction, BaseError } from "wagmi";
import { Hex, parseEther } from "viem";

export function SendTransaction() {
  const { data: hash, error, isPending, sendTransaction } = useSendTransaction();

  async function submit(e: FormEvent<HTMLFormElement>) {
    e.preventDefault();
    const formData = new FormData(e.target as HTMLFormElement);
    const to = formData.get("address") as Hex;
    const value = formData.get("value") as string;
    sendTransaction({ to, value: parseEther(value) });
  }

  const { isLoading: isConfirming, isSuccess: isConfirmed } = useWaitForTransactionReceipt({
    hash,
  });

  return (
    <div>
      <h2>Send Transaction</h2>
      <form onSubmit={submit}>
        <input name="address" placeholder="Address" required />
        <input name="value" placeholder="Amount (ETH)" type="number" step="0.000000001" required />
        <button disabled={isPending} type="submit">
          {isPending ? "Confirming..." : "Send"}
        </button>
      </form>
      {hash && <div>Transaction Hash: {hash}</div>}
      {isConfirming && "Waiting for confirmation..."}
      {isConfirmed && "Transaction confirmed."}
      {error && <div>Error: {(error as BaseError).shortMessage || error.message}</div>}
    </div>
  );
}
```

#### Switching Networks

```tsx title="src/components/switchNetwork.tsx"
import { useChainId, useSwitchChain } from "wagmi";

export function SwitchChain() {
  const chainId = useChainId();
  const { chains, switchChain, error } = useSwitchChain();

  return (
    <div>
      <h2>Switch Chain</h2>
      <h3>Connected to {chainId}</h3>
      {chains.map((chain) => (
        <button
          disabled={chainId === chain.id}
          key={chain.id}
          onClick={() => switchChain({ chainId: chain.id })}
          type="button"
          className="card"
        >
          {chain.name}
        </button>
      ))}

      {error?.message}
    </div>
  );
}
```

## Example code

The code for the application we developed in this guide can be found in the
[Web3Auth Google Login Example](https://github.com/Web3Auth/web3auth-pnp-examples/tree/main/web-modal-sdk/custom-authentication/single-connection/google-implicit-example).
Check it out and try running it locally yourself!

## Questions?

Ask us on [Web3Auth's Community Support Portal](https://web3auth.io/community)
