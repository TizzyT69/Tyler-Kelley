---
title: Building a Browser Extension with Web3Auth
image: "guides-banners/chrome-extension.png"
description: Learn how to build a Browser Extension with Web3Auth
type: guide
tags: [web, evm, chrome extension]
date: January 18, 2023
author: Web3Auth Team
communityPortalTopicId: 46
---

import SetupWeb3AuthDashboard from "@site/src/common/guides/_setup-web3auth-dashboard.mdx";
import Web3AuthPrerequisites from "@site/src/common/guides/_web3auth-prerequisites.mdx";
import SEO from "@site/src/components/SEO";
import ExtensionLoggedInImage from "@site/static/guides/browser-extension/extension-logged-in.png";
import ExtensionImage from "@site/static/guides/browser-extension/extension-preview.png";
import TabItem from "@theme/TabItem";
import Tabs from "@theme/Tabs";

<SEO
  title="Building a Browser Extension with Web3Auth"
  description="Learn how to build a Browser Extension with Web3Auth"
  image="https://web3auth.io/docs/guides-banners/chrome-extension.png"
  slug="/guides/browser-extension"
/>

This guide will walk you through the process of building a browser extension with Web3Auth v10.

## Creating a Browser Extension

To build a browser extension with Web3Auth, you'll need to:

1. Create a new React project using create-react-app
2. Configure it for Chrome extension development
3. Integrate Web3Auth for authentication
4. Add the necessary blockchain interaction features

Once completed, your extension should look something like this:

<img
  style={{ display: "block", maxHeight: "400px", margin: "20px auto" }}
  alt=""
  src={ExtensionImage}
/>

Once logged in you can have all the features Web3Auth provides and along with blockchain libraries
like `ethers.js`, you can interact with the blockchain.

<img
  style={{ display: "block", maxHeight: "400px", margin: "20px auto" }}
  alt=""
  src={ExtensionLoggedInImage}
/>

## How it works?

Web3Auth can be easily integrated into browser extensions. The login flow of the user is as follows:

![Web3Auth Core - Social Login Flow](/images/implicit-flow.svg)

## Prerequisites

<Web3AuthPrerequisites />

- [Chrome Extension](https://developer.chrome.com/docs/extensions/mv3/getstarted/)

We will be building the Chrome extension with `create-react-app` in this guide.

## Setup

### Setup your Web3Auth Dashboard

<SetupWeb3AuthDashboard />

:::note

Once you have the build folder ready for the extension, you will need to go to
`chrome://extensions/` and load the unpacked extension from the build folder. That will give you the
extension ID which you would need to add to the Web3Auth Dashboard.

Add `chrome-extension://<extension-id>` to the Whitelisted URLs in the Web3Auth Dashboard.

:::

## Using the Web3Auth SDK

### Installation

Install the required Web3Auth packages:

```bash
npm install @web3auth/modal
```

For interacting with Ethereum blockchain:

```bash
npm install ethers
```

### Setting up the extension

Let's configure the Web3Auth context in your application:

```tsx title="src/web3authContext.tsx"
import { WEB3AUTH_NETWORK, type Web3AuthOptions } from "@web3auth/modal";

// Get client ID from https://dashboard.web3auth.io
const clientId = "YOUR_CLIENT_ID";

// Instantiate SDK
const web3AuthOptions: Web3AuthOptions = {
  clientId,
  web3AuthNetwork: WEB3AUTH_NETWORK.SAPPHIRE_MAINNET,
};

const web3AuthContextConfig = {
  web3AuthOptions,
};

export default web3AuthContextConfig;
```

Then set up the provider in your React application:

```tsx title="src/index.tsx"
import React from "react";
import ReactDOM from "react-dom/client";
import { Web3AuthProvider } from "@web3auth/modal/react";
import App from "./App";
import web3AuthContextConfig from "./web3authContext";

const root = ReactDOM.createRoot(document.getElementById("root") as HTMLElement);
root.render(
  <React.StrictMode>
    <Web3AuthProvider config={web3AuthContextConfig}>
      <App />
    </Web3AuthProvider>
  </React.StrictMode>,
);
```

### Authentication

In your main application component, you can use Web3Auth hooks for authentication:

```tsx title="src/App.tsx"
import {
  useWeb3AuthConnect,
  useWeb3AuthDisconnect,
  useWeb3AuthUser,
  useWeb3Auth,
} from "@web3auth/modal/react";
import { ethers } from "ethers";
import "./App.css";

function App() {
  const { connect, isConnected, connectLoading, connectError } = useWeb3AuthConnect();
  const { disconnect, disconnectLoading, disconnectError } = useWeb3AuthDisconnect();
  const { userInfo } = useWeb3AuthUser();
  const { provider } = useWeb3Auth();

  const getBalance = async () => {
    if (!provider) {
      console.log("Provider not initialized yet");
      return;
    }
    const ethersProvider = new ethers.BrowserProvider(provider);
    const signer = await ethersProvider.getSigner();
    const address = await signer.getAddress();
    const balance = ethers.formatEther(await ethersProvider.getBalance(address));
    console.log("Balance:", balance);
    return balance;
  };

  const signMessage = async () => {
    if (!provider) {
      console.log("Provider not initialized yet");
      return;
    }
    const ethersProvider = new ethers.BrowserProvider(provider);
    const signer = await ethersProvider.getSigner();
    const message = "Hello World";
    const signature = await signer.signMessage(message);
    console.log("Signature:", signature);
    return signature;
  };

  // UI rendering logic
  return (
    <div className="container">
      <h1>Web3Auth Chrome Extension</h1>
      {!isConnected ? (
        <div className="login-button">
          <button onClick={() => connect()}>Login</button>
          {connectLoading && <p>Connecting...</p>}
          {connectError && <p>Error: {connectError.message}</p>}
        </div>
      ) : (
        <div className="logged-in-view">
          <h2>Welcome {userInfo?.name}</h2>
          <p>Email: {userInfo?.email}</p>
          <div className="actions">
            <button onClick={getBalance}>Get Balance</button>
            <button onClick={signMessage}>Sign Message</button>
            <button onClick={() => disconnect()}>Logout</button>
            {disconnectLoading && <p>Disconnecting...</p>}
            {disconnectError && <p>Error: {disconnectError.message}</p>}
          </div>
        </div>
      )}
    </div>
  );
}

export default App;
```

### Creating the manifest file

Create a `manifest.json` file in the `public` folder for your Chrome extension:

```json title="public/manifest.json"
{
  "name": "Web3Auth Extension",
  "description": "A Chrome extension using Web3Auth for authentication",
  "version": "1.0",
  "manifest_version": 3,
  "action": {
    "default_popup": "index.html",
    "default_icon": {
      "16": "logo192.png",
      "192": "logo192.png"
    }
  },
  "permissions": ["storage"]
}
```

## Fixing Build Issues

When building browser extensions with React and Web3Auth, you might encounter webpack issues. Here's
how to fix common issues:

### Fixing Polyfill Issues

Create a `craco.config.js` file in your project root:

```js title="craco.config.js"
const webpack = require("webpack");

module.exports = {
  webpack: {
    configure: (webpackConfig) => {
      // Add fallbacks for Node.js polyfills
      webpackConfig.resolve.fallback = {
        ...webpackConfig.resolve.fallback,
        crypto: require.resolve("crypto-browserify"),
        stream: require.resolve("stream-browserify"),
        buffer: require.resolve("buffer"),
        path: require.resolve("path-browserify"),
        os: require.resolve("os-browserify/browser"),
        https: require.resolve("https-browserify"),
        http: require.resolve("stream-http"),
        fs: false,
      };

      // Add plugins
      webpackConfig.plugins = [
        ...webpackConfig.plugins,
        new webpack.ProvidePlugin({
          Buffer: ["buffer", "Buffer"],
          process: "process/browser",
        }),
      ];

      return webpackConfig;
    },
  },
};
```

Then install the necessary dependencies:

```bash
npm install crypto-browserify stream-browserify buffer path-browserify os-browserify https-browserify stream-http process
```

Update your package.json to use CRACO:

```json
"scripts": {
  "start": "craco start",
  "build": "craco build",
  "test": "craco test"
}
```

## Interacting with the Blockchain

With the Web3Auth provider, you can interact with the blockchain through libraries like ethers.js:

```tsx
// Get user's address
const getAddress = async () => {
  if (!provider) return;
  const ethersProvider = new ethers.BrowserProvider(provider);
  const signer = await ethersProvider.getSigner();
  const address = await signer.getAddress();
  return address;
};

// Send a transaction
const sendTransaction = async () => {
  if (!provider) return;
  const ethersProvider = new ethers.BrowserProvider(provider);
  const signer = await ethersProvider.getSigner();
  const tx = await signer.sendTransaction({
    to: "0x...", // receiver address
    value: ethers.parseEther("0.001"), // amount to send
  });
  return tx;
};
```

## Questions?

Ask us on [Web3Auth's Community Support Portal](https://web3auth.io/community)
